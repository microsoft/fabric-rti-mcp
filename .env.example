# Fabric RTI MCP Server Environment Configuration
# Copy this file to .env and configure your settings

# =============================================================================
# TRANSPORT CONFIGURATION
# =============================================================================

# Transport mode: "stdio" for local MCP usage, "http" for containerized deployments
FABRIC_RTI_TRANSPORT=stdio

# HTTP server configuration (only used when FABRIC_RTI_TRANSPORT=http)
FABRIC_RTI_HTTP_HOST=0.0.0.0
FABRIC_RTI_HTTP_PORT=8000

# Debug mode: automatically launches MCP Inspector when transport=http
# Values: true, false, 1, 0
FABRIC_RTI_DEBUG_MODE=false

# =============================================================================
# KUSTO / EVENTHOUSE CONFIGURATION
# =============================================================================

# Default Kusto cluster URI (optional)
# Example: https://mycluster.westus.kusto.windows.net
# Demo cluster: https://help.kusto.windows.net/
KUSTO_SERVICE_URI=

# Default database name for Kusto queries
# If not set, uses "NetDefaultDB"
KUSTO_SERVICE_DEFAULT_DB=

# Azure OpenAI embedding endpoint for semantic search (optional)
# Format: https://{resource}.openai.azure.com/openai/deployments/{model}/embeddings?api-version={version};impersonate
# Example: https://my-openai.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2024-10-21;impersonate
AZ_OPENAI_EMBEDDING_ENDPOINT=

# JSON array of known Kusto services (optional)
# Example: [{"service_uri":"https://cluster1.kusto.windows.net","default_database":"DB1","description":"Production"}]
KUSTO_KNOWN_SERVICES=

# Whether to eagerly connect to default service on startup (not recommended)
# Values: true, false, 1, 0
KUSTO_EAGER_CONNECT=false

# Security setting to allow unknown services
# If false, only services in KUSTO_KNOWN_SERVICES are allowed
# Values: true, false, 1, 0
KUSTO_ALLOW_UNKNOWN_SERVICES=true

# Global timeout for all Kusto operations (seconds)
# Example: 300 for 5 minutes
FABRIC_RTI_KUSTO_TIMEOUT=

# =============================================================================
# AZURE MANAGED IDENTITY CONFIGURATION
# =============================================================================

# Azure Managed Identity Client ID (optional)
# Used for authenticating to Azure services in containerized environments
AZURE_CLIENT_ID=

# Azure Tenant ID (optional)
# Required when using service principal authentication
AZURE_TENANT_ID=

# Azure Federated Token File (optional)
# Used in Kubernetes/container environments with workload identity
AZURE_FEDERATED_TOKEN_FILE=

# =============================================================================
# FABRIC API CONFIGURATION
# =============================================================================

# Base URL for Microsoft Fabric API
FABRIC_API_BASE=https://api.fabric.microsoft.com/v1

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example 1: Local development with demo Kusto cluster
# FABRIC_RTI_TRANSPORT=stdio
# KUSTO_SERVICE_URI=https://help.kusto.windows.net/
# KUSTO_SERVICE_DEFAULT_DB=Samples

# Example 2: Production deployment with managed identity
# FABRIC_RTI_TRANSPORT=http
# KUSTO_SERVICE_URI=https://mycluster.westus.kusto.windows.net
# KUSTO_SERVICE_DEFAULT_DB=MyDatabase
# AZURE_CLIENT_ID=12345678-1234-1234-1234-123456789012

# Example 3: Multiple known services configuration
# KUSTO_KNOWN_SERVICES=[{"service_uri":"https://prod.kusto.windows.net","default_database":"ProdDB","description":"Production"},{"service_uri":"https://test.kusto.windows.net","default_database":"TestDB","description":"Testing"}]
# KUSTO_ALLOW_UNKNOWN_SERVICES=false
